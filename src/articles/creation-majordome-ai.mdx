---
title: "D√©veloppez un majordome IA ultra-performant avec Groq et React : le guide complet"
date: "2024-05-23"
summary: "Comment j'ai cr√©√© un agent conversationnel proactif capable de r√©pondre en moins de 500ms. D√©couvrez la stack Groq + React et acc√©dez au code source pr√™t √† l'emploi pour votre propre site."
image: "/images/blog/majordome.webp"
tags: ["React", "AI", "Groq", "Netlify", "Vercel", "Performance"]
---

## Introduction : Au-del√† du Simple Portfolio

Quand j'ai commenc√© √† refondre mon portfolio, je voulais cr√©er plus qu'une simple vitrine. Je voulais une exp√©rience. Une page "Contact" c'est bien, mais un assistant personnel qui guide le visiteur de mani√®re interactive ? C'est m√©morable.

C'est de l√† qu'est n√©e l'id√©e de "AsBlast AI" : un majordome num√©rique, toujours disponible, mais surtout, qui a le savoir-vivre d'accueillir personnellement les visiteurs √† leur arriv√©e. Voici le carnet de bord de sa cr√©ation, de la pile technique au raffinement de l'exp√©rience utilisateur.

### Le Choix D√©terminant : Pourquoi Groq et pas un autre ?

J'aurais pu utiliser l'API d'OpenAI (GPT-3.5/4), qui est un standard de l'industrie. Mais mon objectif √©tait double : la pertinence et la **vitesse**. Pour un chatbot, la latence est l'ennemi num√©ro un de l'exp√©rience utilisateur. Personne n'aime attendre devant un indicateur de frappe qui clignote pendant de longues secondes.

C'est l√† que **Groq** entre en jeu. Groq n'est pas un mod√®le de langage, mais un moteur d'inf√©rence qui ex√©cute des mod√®les open-source (comme Llama 3) sur son mat√©riel sp√©cialis√©, le **LPU (Language Processing Unit)**. Le r√©sultat est bluffant : des vitesses de g√©n√©ration de plusieurs centaines de tokens par seconde.

Concr√®tement, pour l'utilisateur, les r√©ponses du majordome sont **quasi instantan√©es**. C'est un avantage concurrentiel qui transforme compl√®tement la perception du chatbot : il n'est plus lent et laborieux, il est vif et intelligent.

### La Pile Technique Compl√®te

Avec cet objectif de vitesse en t√™te, voici les outils que j'ai assembl√©s :

1.  **Le Cerveau (Mod√®le) :** **Meta Llama 3**, un mod√®le open-source puissant.
2.  **Le Moteur (Inf√©rence) :** **Groq Cloud** pour une ex√©cution ultra-rapide.
3.  **Frontend :** **React** (via Vite) pour une interface r√©active et modulaire.
4.  **Backend (Serverless) :** **Netlify Functions** pour cr√©er un point d'API s√©curis√© sans g√©rer de serveur.
5.  **La Plomberie de l'IA :** Le **Vercel AI SDK** et sa librairie `@ai-sdk/react` pour connecter facilement mon frontend √† mon backend en g√©rant le streaming des r√©ponses.
6.  **L'√Çme (Animations) :** **Framer Motion** pour donner vie √† l'interface.

## √âtape 1 : Donner une Voix au Majordome (Le Backend sur Netlify)

La premi√®re √©tape √©tait de cr√©er une "passerelle" s√©curis√©e vers l'API de Groq. Je ne pouvais pas exposer ma cl√© d'API c√¥t√© client. Une fonction serverless sur Netlify est parfaite pour √ßa.

Le r√¥le de cette fonction (`/netlify/functions/chat.ts`) est simple :
- Recevoir la conversation de l'utilisateur depuis le frontend.
- Y ajouter un **prompt syst√®me** secret qui donne sa personnalit√© et ses instructions au majordome.
- Envoyer le tout √† l'API de Groq et streamer la r√©ponse vers le client en temps r√©el.

Voici le c≈ìur de la fonction, qui utilise le SDK officiel de Groq :

```typescript
// Dans /netlify/functions/chat.ts
import Groq from 'groq-sdk';
import { streamText } from 'ai';
import { createGroq } from '@ai-sdk/groq';

// On initialise le provider Groq avec la cl√© d'API
// stock√©e dans les variables d'environnement de Netlify
const groq = createGroq({ apiKey: process.env.GROQ_API_KEY });

export const config = { runtime: 'edge' };

export default async function handler(req: Request) {
  const { messages } = await req.json();

  const result = await streamText({
    model: groq('llama3-8b-8192'), // Le mod√®le qu'on souhaite utiliser
    system: `Tu es AsBlast AI, un assistant virtuel expert sur le portfolio du d√©veloppeur Brice. Tu es amical, serviable et un peu geek. Tu r√©ponds aux questions sur ses projets, ses comp√©tences (React, Node.js, TypeScript...) et comment le contacter. Tes r√©ponses sont concises et directes. Ne r√©ponds qu'√† des questions li√©es √† Brice.`,
    messages,
  });

  return result.toAIStreamResponse();
}
```

## √âtape 2 : Construire son Corps (L'Interface React)

Avec un backend fonctionnel, il √©tait temps de cr√©er une interface √† la hauteur. Le Vercel AI SDK, et plus pr√©cis√©ment son hook `useChat` de `@ai-sdk/react`, a rendu cette t√¢che incroyablement simple.

Mon composant `AIChat.tsx` peut ainsi se concentrer sur l'essentiel : l'exp√©rience utilisateur.

```jsx
// Extrait simplifi√© de AIChat.tsx
import { useChat } from '@ai-sdk/react';
import { motion } from 'framer-motion';

export function AIChat() {
  const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat({
    api: '/.netlify/functions/chat', // Le point d'API que nous avons cr√©√©
  });

  return (
    <motion.div>
      {/* ...Le header et le reste de l'UI du chat... */}
      <div className="message-list">
        {messages.map(m => (
          <div key={m.id} className={`message-bubble ${m.role}`}>
            <p>{m.content}</p>
          </div>
        ))}
        {/* L'indicateur de frappe anim√© quand l'IA r√©pond */}
        {isLoading && <div className="typing-indicator" />}
      </div>
      
      <form onSubmit={handleSubmit}>
        <input 
          value={input} 
          onChange={handleInputChange} 
          placeholder="Posez une question..." 
        />
        <button type="submit" disabled={isLoading || !input.trim()}>Envoyer</button>
      </form>
    </motion.div>
  );
}
```

## √âtape 3 : Le Raffinement - D'un Outil √† un Majordome

Un chatbot fonctionnel, c'est bien. Un majordome proactif, c'est mieux. C'est ce comportement qui allait d√©finir l'exp√©rience et la rendre unique.

#### La Logique de l'Accueil

1.  **D√©tecter la Premi√®re Visite :** J'ai cr√©√© un hook `useFirstVisit` qui utilise `sessionStorage` pour n'accueillir l'utilisateur qu'une seule fois par session. Pour le rendre robuste face au `StrictMode` de React (qui monte les composants deux fois en d√©veloppement), j'ai utilis√© une `useRef` pour m'assurer que la v√©rification ne se fasse qu'une seule fois.

    ```typescript
    // hooks/useFirstVisit.ts
    export const useFirstVisit = () => {
      const [isFirstVisit, setIsFirstVisit] = useState(false);
      const hasChecked = useRef(false);

      useEffect(() => {
        if (hasChecked.current) return;
        hasChecked.current = true;
        if (!sessionStorage.getItem('hasBeenWelcomedByAI')) {
          sessionStorage.setItem('hasBeenWelcomedByAI', 'true');
          setIsFirstVisit(true);
        }
      }, []);
      return { isFirstVisit };
    };
    ```

2.  **L'Ouverture Automatique & la Retraite Discr√®te :** Dans `AIChat.tsx`, un `useEffect` √©coute le signal de `isFirstVisit`. Si c'est `true`, il commande l'ouverture de la fen√™tre de chat apr√®s une seconde. Un autre `useEffect` s'assure que si l'utilisateur n'interagit pas avec le chat ouvert, celui-ci se referme gracieusement apr√®s 8 secondes. Le majordome a salu√©, puis s'est retir√©, restant disponible via une ic√¥ne flottante.

## √âtape 4 : Le Diable est dans les D√©tails (L'UX soign√©e)

Pour qu'une interaction soit vraiment agr√©able, plusieurs micro-d√©tails sont essentiels :

*   **Auto-d√©filement :** Un chat sans auto-d√©filement est inutilisable. J'ai impl√©ment√© un `useRef` sur un √©l√©ment vide √† la fin de la liste des messages et un `useEffect` qui appelle `scrollIntoView()` √† chaque nouveau message.
*   **Indicateur de Frappe Anim√© :** Plut√¥t qu'un texte statique, j'ai utilis√© `Framer Motion` pour cr√©er une petite animation de trois points qui dansent. Cela rend l'attente (m√™me si elle est tr√®s courte avec Groq) plus agr√©able.
*   **Gestion des √âtats du Bouton :** Le bouton d'envoi est d√©sactiv√© si le champ de saisie est vide (`!input.trim()`) ou si l'IA est en train de r√©pondre (`isLoading`). C'est un d√©tail fondamental pour √©viter les soumissions multiples ou vides.

## √âtape 5 : Les D√©fis Rencontr√©s et les Le√ßons Apprises

Aucun projet n'est un long fleuve tranquille. Voici quelques-uns des obstacles et ce qu'ils m'ont appris :

1.  **Le Pi√®ge du `StrictMode` de React :** Comme mentionn√©, mon hook `useFirstVisit` ne fonctionnait pas initialement. Le double-montage a √©t√© un excellent rappel de l'importance de coder des effets idempotents.
2.  **L'Art du Prompt Engineering :** Mon premier prompt syst√®me √©tait trop vague. L'IA r√©pondait de mani√®re trop longue. J'ai d√ª l'it√©rer plusieurs fois, en ajoutant des contraintes comme "Tes r√©ponses sont concises et directes" pour affiner sa personnalit√©.
3.  **L'√âcosyst√®me de l'IA SDK :** Le Vercel AI SDK a r√©cemment √©volu√© vers `@ai-sdk/react`. J'ai d√ª m'adapter aux nouvelles API, comme `streamText` et `toAIStreamResponse`, ce qui fut un bon exercice pour rester √† jour sur un √©cosyst√®me qui bouge tr√®s vite.

## Conclusion : Vitesse, Exp√©rience et Comp√©tences

La cr√©ation de ce majordome a √©t√© un voyage technique passionnant. Le choix de Groq s'est av√©r√© d√©cisif, transformant une fonctionnalit√© potentiellement gadget en un outil performant et agr√©able.

Ce projet n'est pas juste une ligne sur mon CV. Il d√©montre concr√®tement :
- Ma capacit√© √† int√©grer des services d'IA tiers de mani√®re s√©curis√©e.
- Ma ma√Ætrise de l'√©cosyst√®me React, des hooks personnalis√©s √† la gestion d'√©tat.
- Mon obsession pour la performance et l'exp√©rience utilisateur.

Au final, la meilleure fa√ßon de se pr√©senter n'est pas toujours une longue biographie, mais une conversation fluide et instantan√©e.

*Et vous, quelle technologie √©mergente vous enthousiasme le plus pour am√©liorer l'exp√©rience web ?*

## Conclusion technique
...
Si vous voulez gagner du temps, j'ai packag√© tout le code de ce majordome (Frontend + Backend Netlify, Vercel, Autre) dans un kit pr√™t √† l'emploi. √âvitez les erreurs de configuration et installez-le sur votre site en moins de 10 minutes.

*√âconomisez 10 heures de d√©veloppement et concentrez-vous sur ce qui compte : l'exp√©rience de vos utilisateurs.*
<CtaBox 
  title="Kit Complet Majordome IA" 
  price="7.99" 
  url="https://pack-majordome.lemonsqueezy.com/checkout/buy/57adffba-9421-41a8-83bf-fb5be9d78f26" 
/>

### üì¶ Ce que vous obtenez :
*   üöÄ **Code Frontend :** Le composant React complet avec animations Framer Motion.
*   üõ°Ô∏è **Code Backend :** 3 versions pr√™tes √† l'emploi (Netlify, Vercel, Express/VPS).
*   üìö **Guide d'installation :** Proc√©dure pas √† pas pour configurer votre cl√© API sans stress.
*   üîÑ **Z√©ro frais mensuel :** Utilise uniquement les ressources gratuites de vos h√©bergeurs.

